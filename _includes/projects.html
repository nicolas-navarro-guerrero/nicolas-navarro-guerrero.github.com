{% assign section = include.section | downcase | default: '' %}
{% assign latest = include.latest | default: -1 %}
{% assign page = include.page %}


{% if section contains 'acknowledgment' %}
  {% if page.acknowledgment != null %}
    <h3 class="pt-4">Acknowledgments:</h3>
    {{ page.acknowledgment }}
  {% endif %}


{% elsif section contains 'interests' %}
<ul>
  <li>Embodied and Developmental Cognition</li>
  <li>Bio-inspired Perceptual Systems & Signal Processing</li>
  <li>Cognitive Robotics</li>
  <li>Neurorobotics</li>
  <li>Human-Robot Interaction</li>
  <li>Service Robots</li>
</ul>

{% elsif section contains 'partners' %}
  {% if page.partners !=  null %}
    <h3 class="pt-4">Project Partners:</h3>
    {{ page.partners }}
  {% endif %}


{% elsif section contains 'sponsors' %}
  {% if page.sponsors != null %}
    <h3 class="pt-4">Grants and Sponsors:</h3>
    {{ page.sponsors }}
  {% endif %}


{% elsif section contains 'metadata' %}
<div class="card mb-3">
  <div class="row no-gutters">
    {% if page.thumbnail != null %}
    <div class="col-md-4">
      <img src="{{ page.thumbnail }}" class="card-img rounded" alt="Thumbnail for {{ page.title }}">
    </div>
    {% endif %}
    <div class="col-md-8">
      <div class="card-header border-light"><h5 class="card-title">{{ page.title }}
        <small class="text-muted">{{ page.subtitle }}</small></h5></div>
      <div class="card-body">
        {% if page.coordinator != null %}
          <p class="card-text">Coordinator (PI): {{ page.coordinator }}</p>
        {% endif %}
        {% if page.staff != null %}
          <p class="card-text">Contributors: {{ page.staff }}</p>
        {% endif %}
        <p>Start Date: {{ page.date }}</p>
        <p>End Date: {{ page.end }}</p>
        {% if page.funded != null %}
          <p>Funded by {{ page.funded }}</p>
          {% if page.grant %}
            <p>Project Code or Grant Number: {{ page.grant }}</p>
          {% endif %}
        {% endif %}
      </div><!-- card body -->
    </div><!-- row 8 -->
  </div><!-- row -->
</div><!-- card -->


{% elsif section contains 'publications' %}
  {% assign isrelatedpapers = null %}
  {% if page.relatedpapers != null %}
    {% for papers in site.publications reversed %}
      {% if papers.tags contains page.relatedpapers %}
        {% assign isrelatedpapers = 1 %}
        {% break %}
      {% endif %}
    {% endfor %}
    {% if isrelatedpapers %}
    <h3 class="pt-4">Related Publications:</h3>
    <ol>
      {% for papers in site.publications reversed %}
        {% if papers.tags contains page.relatedpapers %}
          <li style="padding-bottom:15px;">
            {% include publications-citation-style.html param=papers %}
          </li>
        {% endif %}
      {% endfor %}
      {% for papers in site.pub-collaborations reversed %}
        {% if papers.tags contains page.relatedpapers %}
          <li style="padding-bottom:15px;">
            {% include publications-citation-style.html param=papers %}
          </li>
        {% endif %}
      {% endfor %}
    </ol>
    {% endif %}
  {% endif %}


{% else %}
{% assign projects = site.pages | where_exp: "item", "item.tags contains 'project'" %}
{% assign projects = projects | sort: "date" | reverse %}

  {% assign counter = 0 %}
  <div class="card-columns">
  {% for item in projects %}
    {% unless item.categories contains 'template' %}
      {% assign tmp = item.tags | downcase %}
      {% if tmp contains section %}
        {% assign counter = counter | plus: 1 %}
  <div class="card border-light mt-3">
    <a href="{{ item.slug }}"><img src="{% if item.thumbnail != null %}{{ item.thumbnail }}{% else %}/assets/placeholders.svg{% endif %}" class="card-img-top rounded" alt="Project Thumbnail"></a>
    <div class="card-body mx-n4 text-center">
      <h5 class="card-title"><a href="{{ item.slug }}">{{ item.title }}</a></h5>
      {% if item.subtitle != null %}
      <h6 class="card-subtitle mb-2 text-muted">{{ item.subtitle }}</h6>
      {% endif %}
      <p class="card-text">{{ item.start }} &#187; {{ item.end }}</p>
    </div>
    <div class="card-footer bg-transparent border-white text-center">
      <a href="{{ item.slug }}" class="btn btn-primary">Read more</a>
    </div>
  </div><!-- card -->
      {% endif %}
      {% if counter == latest %}
        {% break %}
      {% endif %}
    {% endunless %}
  {% endfor %}
  </div><!-- card columns -->
{% endif %}

